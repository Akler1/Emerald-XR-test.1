<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Studs — 360 (autorotate + drag)</title>

  <!-- jQuery (cdnjs) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" crossorigin="anonymous"></script>

  <!-- SpriteSpin 4.1.0 (jsDelivr) -->
  <link  href="https://cdn.jsdelivr.net/npm/spritespin@4.1.0/release/spritespin.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/spritespin@4.1.0/release/spritespin.min.js"></script>

  <style>
    body{margin:0;background:#000;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{width:min(92vw,1200px);margin:24px auto;text-align:center}
    #studs360{width:100%;height:auto}
    #status{color:#bbb;margin-top:8px;font-size:14px}
  </style>
</head>
<body>
  <div class="wrap">
    <div id="studs360"></div>
    <div id="status">Loading…</div>
  </div>

  <script>
    // === YOUR EXACT FRAMES ===
    const folder = 'XR test 28.10.2';   // note the space
    const total  = 192;                  // 0_0.jpg ... 0_191.jpg
    const secondsPerTurn = 4;            // autorotate speed
    // =========================

    // URL-encode spaces for requests
    const base = encodeURIComponent(folder).replace(/%2F/g,'/');
    const srcs = Array.from({length: total}, (_,i) => `${base}/0_${i}.jpg`);

    // Probe first frame so we fail gracefully if the path is off
    function probeFirst(){
      return new Promise(res=>{
        const im = new Image();
        im.onload = () => res(true);
        im.onerror = () => res(false);
        im.src = srcs[0] + '?b=' + Date.now();
      });
    }

    (async function start(){
      const ok = await probeFirst();
      if(!ok){
        document.getElementById('status').textContent =
          "Can't load first frame: " + srcs[0] + " — check folder/name/case.";
        return;
      }

      // Initialize SpriteSpin (autorotate + drag)
      $('#studs360').spritespin({
        source: srcs,
        width: 1200,
        height: 1200,
        sense: 1,                         // drag direction (set -1 to invert)
        animate: true,                    // AUTOROTATE ON
        loop: true,
        frame: 0,
        frames: srcs.length,
        frameTime: Math.round((secondsPerTurn*1000)/srcs.length), // ~4s/turn
        responsive: true,
        detectSubsampling: true,

        onLoad: function(e, data){
          const status = document.getElementById('status');
          status.textContent = 'Loaded. Drag to rotate.';

          // Stop only autoplay on first interaction; drag remains enabled
          const $el = $(data.target);
          const stopAuto = () => { $('#studs360').spritespin('animate', false); };
          $el.one('mousedown touchstart wheel keydown', stopAuto);
        }
      });
    })();
  </script>
</body>
</html>
